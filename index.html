<!DOCTYPE html>
<html>
<head>
    <title>برنامج محاسبة لمحل جملة</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; color: #2c3e50; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #555; }
        input[type="text"], input[type="number"] { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; margin-top: 20px; background-color: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; transition: background-color 0.3s; }
        button:hover { background-color: #2980b9; }
        #clearButton { background-color: #e74c3c; }
        #clearButton:hover { background-color: #c0392b; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: right; }
        th { background-color: #ecf0f1; color: #2c3e50; }
        tfoot td { font-weight: bold; background-color: #ecf0f1; }
        tfoot tr:last-child { border-top: 2px solid #2c3e50; }
    </style>
</head>
<body onload="loadInvoice()">

<div class="container">
    <h1>برنامج محاسبة لمحل جملة</h1>
   
    
    <h2>إضافة صنف جديد</h2>
    
    <label for="productName">الصنف:</label>
    <input type="text" id="productName">
    
    <label for="quantity">العدد:</label>
    <input type="number" id="quantity" min="1" value="1">
    
    <label for="price">سعر الوحدة بالدولار:</label>
    <input type="number" id="price" min="0.01" step="0.01">
    
    <button onclick="addProduct()">إضافة الصنف</button>
    <button id="clearButton" onclick="clearInvoice()">مسح الفاتورة</button>

    <hr>
    
    <h2>تفاصيل الفاتورة</h2>
    <table id="invoiceTable">
        <thead>
            <tr>
                <th>الصنف</th>
                <th>العدد</th>
                <th>سعر الوحدة</th>
                <th>الإجمالي</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
        <tfoot>
            <tr>
                <td colspan="3">الإجمالي الكلي:</td>
                <td><span id="totalAmount">0.00</span> دولار</td>
            </tr>
        </tfoot>
    </table>
</div>

<script>
    let invoiceItems = [];

    function loadInvoice() {
        const storedItems = localStorage.getItem('invoice');
        if (storedItems) {
            invoiceItems = JSON.parse(storedItems);
            renderTable();
        }
    }

    function saveInvoice() {
        localStorage.setItem('invoice', JSON.stringify(invoiceItems));
    }

    function renderTable() {
        const tableBody = document.querySelector('#invoiceTable tbody');
        tableBody.innerHTML = '';
        let total = 0;

        invoiceItems.forEach(item => {
            const newRow = tableBody.insertRow();
            const cell1 = newRow.insertCell(0);
            const cell2 = newRow.insertCell(1);
            const cell3 = newRow.insertCell(2);
            const cell4 = newRow.insertCell(3);

            cell1.textContent = item.name;
            cell2.textContent = item.quantity;
            cell3.textContent = parseFloat(item.price).toFixed(2);
            cell4.textContent = item.subtotal.toFixed(2);
            
            total += item.subtotal;
        });
        
        document.getElementById('totalAmount').textContent = total.toFixed(2);
    }

    function addProduct() {
        const productName = document.getElementById('productName').value;
        const quantity = document.getElementById('quantity').value;
        const price = document.getElementById('price').value;

        if (!productName || !quantity || !price) {
            alert('الرجاء إدخال جميع البيانات!');
            return;
        }

        const subtotal = parseFloat(quantity) * parseFloat(price);

        const newItem = {
            name: productName,
            quantity: parseFloat(quantity),
            price: parseFloat(price),
            subtotal: subtotal
        };

        invoiceItems.push(newItem);
        saveInvoice();
        renderTable();

        document.getElementById('productName').value = '';
        document.getElementById('quantity').value = '1';
        document.getElementById('price').value = '';
    }

    function clearInvoice() {
        if (confirm('هل أنت متأكد من مسح الفاتورة؟ لن تتمكن من استعادتها.')) {
            invoiceItems = [];
            saveInvoice();
            renderTable();
        }
    }
</script>

</body>
</html>
